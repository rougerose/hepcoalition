!function(){"use strict";const e="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, [tabindex], [contentEditable]";var t={set:function(t=document.body,i){if(t.disabledElements)return;const s=[],n=[];Array.prototype.forEach.call(t.querySelectorAll(e),(e=>{if(i&&i.contains(e)||e.closest("[hidden]"))return;const t=parseInt(e.getAttribute("tabindex"),10);if(t){if(t<0)return;e.defaultTabindex=t}s.push(e),e.setAttribute("tabindex","-1")})),t.disabledElements=s.length?s:null,i?Array.prototype.forEach.call(i.parentNode.children,(e=>{if("SCRIPT"===e.nodeName||e===i)return;const t=e.getAttribute("aria-hidden");if(t){if("true"===t)return;e.defaultAriaHidden=t}e.setAttribute("aria-hidden","true"),n.push(e)})):(t.setAttribute("aria-hidden","true"),n.push(t)),t.hiddenElements=n.length?n:null},unset:function(t=document.body){const i=t.disabledElements||Array.from(t.querySelectorAll(e)),s=t.hiddenElements||[t];i.forEach((e=>{const t=e.defaultTabindex;t?(e.setAttribute("tabindex",t),e.defaultTabindex=null):e.removeAttribute("tabindex")})),t.disabledElements=null,s.forEach((e=>{const t=e.defaultAriaHidden;t?(e.setAttribute("aria-hidden",t),e.defaultAriaHidden=null):e.removeAttribute("aria-hidden")})),t.hiddenElements=null},focusables:e};let i,s=0,n=[];class l{static get layerIndex(){return s}static get stack(){return n.slice()}static set layerIndex(e){s=e}get returnValue(){return this.el.returnValue}set returnValue(e){this.el.returnValue="object"!=typeof e?e.toString():JSON.stringify(e)}addEventListener(){this.el.addEventListener.apply(this.el,arguments)}constructor(e,t){if(this._handleCancel=this._handleCancel.bind(this),this._handleClick=this._handleClick.bind(this),this._handleClose=this._handleClose.bind(this),this.callbacks={},"string"==typeof(e=(t=arguments[1]||("object"==typeof arguments[0]?arguments[0]:{}))!==arguments[0]?arguments[0]:void 0)){const t=document.createElement("div");t.innerHTML=e,e=t.firstChild}if(!e&&!t)throw new Error("No parameter passed.");void 0===t.modal&&(t.modal=!0),t.closeOnCancel||(t.closeOnCancel=!0),this.options=t,this._init(e)}_bind(){this.el.addEventListener("click",this._handleClick),this.el.addEventListener("cancel",this._handleCancel),this.el.closeBtns&&this.el.closeBtns.forEach((e=>{e.addEventListener("click",this._handleClose)}))}_createDom(){const e=document.createElement(this.options.tagName||"div");if(this.options.className&&(e.className+=this.options.className),e.setAttribute("aria-hidden","true"),this.options.modal&&e.setAttribute("aria-modal","true"),this.options.content&&("string"==typeof this.options.content?e.innerHTML=this.options.content:e.appendChild(this.options.content)),this.options.label&&e.setAttribute("aria-label",this.options.label),this.options.role){e.setAttribute("role",this.options.role);const t=l.layerIndex;if(!this.options.label&&!e.hasAttribute("aria-labelledby")&&!e.hasAttribute("aria-label")){const i=e.querySelector(this.options.titleSelector||"[data-label]");let s;i&&(s=i.id||`layerTitle${t}`,i.id=s,e.setAttribute("aria-labelledby",s))}if(!e.hasAttribute("aria-describedby")){const i=e.querySelector("[data-description]");let s;i&&(s=i.id||`layerDescription${t}`,i.id=s,e.setAttribute("aria-describedby",s))}}return e}_disableDocument(){this.documentDisabled=!0,t.set(document.body,this.el)}_dispatchEvent(e){const t={cancelable:"cancel"===e},i=new window.CustomEvent(e,t);this.el.dispatchEvent(i)}_enableDocument(){t.unset(document.body),this.documentDisabled=!1}_enableLayer(){t.unset(this.el)}_setInteractiveElement(){if(this.el.firstInteractiveElement=this.el.querySelector("[autofocus]"),this.el.firstInteractiveElement)return;const e=window.innerHeight;Array.prototype.some.call(this.el.querySelectorAll(t.focusables),(t=>{const i=t.offsetHeight;return!!(t.offsetTop+i<=e&&(t.offsetWidth||t.offsetHeight))&&(this.el.firstInteractiveElement=t,!0)})),this.el.firstInteractiveElement||Array.prototype.some.call(this.el.querySelectorAll("h1, h2, h3, h4, h5, h6, p, ul, dl, figure, img, table, canvas, detail"),(e=>!(!e.offsetWidth&&!e.offsetHeight)&&(e.setAttribute("tabindex","-1"),this.el.firstInteractiveElement=e,!0)))}_focus(){this.el.firstInteractiveElement||this._setInteractiveElement(),window.requestAnimationFrame((()=>{this.el.firstInteractiveElement.focus()}))}_handleCancel(e){e.defaultPrevented||"alertdialog"===this.options.role||this._handleClose(e)}_handleClick(e){!1!==this.options.closeOnCancel&&e.target===this.el&&(e.target===this.el&&"alertdialog"===this.options.role||this._dispatchEvent("cancel"))}_handleClose(){this._unbind(),this._dispatchEvent("close"),this.el.setAttribute("aria-hidden","true"),this.options.modal&&1===n.length&&this._enableDocument(),n.splice(n.indexOf(this.el),1),this.options.opener.focus()}close(e){e&&(this.el.returnValue=e),this._handleClose()}_init(e){return l.layerIndex++,this.el=e?this._initDom(e):this._createDom(),this.el.layer=this,this.el.returnValue="",this.el.close=this.close,this.options.closeSelector&&(this.el.closeBtns=Array.from(this.el.querySelectorAll(this.options.closeSelector)),this.el.closeBtns.length||delete this.el.closeBtns),this.options.role&&this._validateModal(),this.el.parentNode!==document.body&&document.body.appendChild(this.el),this}_initDom(e){return this.options.role=e.getAttribute("role"),this.options.modal&&e.setAttribute("aria-modal","true"),e}removeEventListener(){this.el.removeEventListener.apply(this.el,arguments)}show(){n.unshift(this.el),this.returnValue="",this._bind(),this.options.opener=this.options.opener||i||document.activeElement,"svg"===this.options.opener.nodeName&&(this.options.opener=this.options.opener.parentNode),"false"!==this.el.getAttribute("aria-hidden")&&this.el.setAttribute("aria-hidden","false"),this._focus(),1===n.length&&this.options.modal&&!this.documentDisabled?this._disableDocument():this.documentDisabled&&this.options.content&&this._enableLayer()}_unbind(){this.el.removeEventListener("click",this._handleClick),this.el.removeEventListener("click",this._handleCancel),this.el.closeBtns&&this.el.closeBtns.forEach((e=>{e.removeEventListener("click",this._handleClose)}))}_validateModal(){const e=this.el.getAttribute("aria-label"),t=this.el.getAttribute("aria-describedby");let i;if((!e||e&&e.trim().length<0)&&(i=this.el.querySelector(`#${this.el.getAttribute("aria-labelledby")}`),!i||!this.el.contains(i)))throw new Error('No title is present in the layer. Use the "data-label" attribute on the visible title or pass the label using the "label" key when creating the layer.');if("alertdialog"===this.options.role&&!t)throw new Error('"alertdialog" layer needs a description, use the "data-description" attribute on the text content of the layer to validate the layer.')}}document.body.addEventListener("keydown",(e=>{if(!n.length||27!==e.keyCode)return;n[0].layer._dispatchEvent("cancel")})),document.body.addEventListener("focus",(e=>{e.target!==document.body&&(i=e.target)}),!0);const a=function(e){let t,i=e.parentElement;function s(e){t&&!e.target.closest("#"+i.id)&&a(t)}function n(e){const i=e.currentTarget;t&&i!==t&&a(t),a(i)}function l(e){27===e.keyCode&&(null!==e.target.closest('ul[aria-hidden="false"]')?(t.focus(),a(t)):"true"===e.target.getAttribute("aria-expanded")&&a(t))}function a(e){const i=document.getElementById(e.getAttribute("aria-controls"));"true"===e.getAttribute("aria-expanded")?(e.setAttribute("aria-expanded",!1),i.setAttribute("aria-hidden",!0),t=!1):(e.setAttribute("aria-expanded",!0),i.setAttribute("aria-hidden",!1),function(e){const t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=e.offsetParent.getBoundingClientRect().left;i+e.offsetWidth+32>t&&e.classList.add("sub-menu--right")}(i),t=e)}this.init=function(){e.querySelectorAll("ul").forEach((t=>{const i=t.parentElement;if(void 0!==t){let s=function(e){const t=e.querySelector("a"),i=t.innerHTML,s=t.attributes,n=document.createElement("button");if(null!==t){let l,a;for(n.innerHTML=i.trim(),l=0,a=s.length;l<a;l++){let e=s[l];"href"!==e.name&&n.setAttribute(e.name,e.value)}e.replaceChild(n,t)}return n}(i);!function(e,t){let i;const s=e.getAttribute("id");i=null===s?t.textContent.trim().replace(/\s+/g,"-").toLowerCase()+"-submenu":s,t.setAttribute("aria-controls",i),t.setAttribute("aria-expanded",!1),e.setAttribute("id",i),e.setAttribute("aria-hidden",!0)}(t,s),s.addEventListener("click",n),e.addEventListener("keyup",l)}})),document.addEventListener("click",s)}},o=document.querySelectorAll("[data-open-modal-id]");if(o.length>=1){const e=document.body;function r(e){let t=e.target.closest("[aria-hidden]");"modal"===e.target.classList[0]&&"opacity"!==e.propertyName&&(t.removeEventListener("transitionend",r),t.removeAttribute("style"))}Array.prototype.forEach.call(o,(t=>{let i=t,s=i.getAttribute("data-open-modal-id"),n=document.getElementById(s),a="overlay is-closed",o=".modal_btnClose",d="",c="";"modalMenu"===s&&(a="overlay overlay--full is-closed",o=".sitenav_closeMenu",d=n.querySelector("button"),c=n.querySelector(".sitenavOverlay_menu"));let h=new l({content:n,opener:i,className:a,role:"dialog",closeSelector:o,modal:!0});i.addEventListener("click",(t=>{i.classList.add("is-active"),e.classList.add("has-overlay"),h.show(),window.requestAnimationFrame((()=>{h.el.classList.remove("is-closed"),d&&d.classList.add("is-active"),c&&c.classList.add("is-visible")}))})),h.addEventListener("close",(()=>{h.el.style.display="flex",c&&c.classList.remove("is-visible"),h.el.addEventListener("transitionend",r),h.el.classList.add("is-closed"),e.classList.remove("has-overlay"),i.classList.remove("is-active"),d&&d.classList.remove("is-active")}))}))}document.querySelectorAll(".clicky-menu").forEach((e=>{new a(e).init()}))}();
